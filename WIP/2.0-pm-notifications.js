// Generated by CoffeeScript 1.7.1
var focus,
  __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

FList.tNotice = {
  tabTally: {}
};

focus = true;

FList.tNotice.draw = function() {
  return document.title = "(" + this.tabTally.sum + ") F-list - Chat";
};

FList.tNotice.newMsg = function(tab) {
  if (__indexOf.call(this.tabTally, tab) >= 0) {
    this.tabTally.tab++;
  } else {
    this.tabTally.tab = 1;
  }
  if (__indexOf.call(this.tabTally, sum) >= 0) {
    this.tabtally.sum++;
  } else {
    this.tabTally.sum = 1;
  }
  return this.draw();
};

FList.tNotice.readMsg = function(tab) {
  this.tabTally.sum -= this.tabTally.tab;
  delete this.tabTally.tab;
  if (this.tabTally.sum) {
    return this.draw();
  } else {
    delete this.tabTally.sum;
    return document.title = "F-list - Chat";
  }
};

window.onfocus = function() {
  var _ref;
  focus = true;
  if (_ref = FList.Chat.TabBar.activeTab.id.toLowerCase, __indexOf.call(FList.tNotice.tabTally, _ref) >= 0) {
    return FList.tNotice.readMsg(FList.Chat.TabBar.activeTab.id.toLowerCase);
  }
};

window.onblur = function() {
  return focus = false;
};
